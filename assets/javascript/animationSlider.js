export default function () {
  function Animate(t,i){this.canvas=t,this.options=defaults(i||{},this.options),this.init()}function Point(t,i,s,o){this.options=o||{},this.id=s,this.ctx=i,this.position=t||{x:0,y:0},this.origin={x:this.position.x,y:this.position.y},this.opacity=0,this.closest=[]}function Circle(t,i,s){this.options=s||{},this.point=t||null,this.radius=this.options.radius||null,this.color=this.options.color||null,this.opacity=0,this.ctx=i}function defaults(t,i){for(var s in i)void 0===t[s]&&(t[s]=i[s]);return t}Animate.prototype.options={density:10,speed:10,sync:!1,distance:100,lineColor:"255, 255, 255",circleColor:"255, 255, 255",radius:20,lineWidth:1,lines:3,updateClosest:!1,mouse:!0},Animate.prototype.init=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.target={position:{x:this.width/2,y:this.height/2}},this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this)),!0!==this.options.mouse||"ontouchstart"in window||window.addEventListener("mousemove",this.mousemove.bind(this)),this.points=[];for(var t=0;t<this.width;t+=this.width/this.options.density)for(var i=0;i<this.height;i+=this.height/this.options.density){var s=new Point({x:t+Math.random()*this.width/this.options.density,y:i+Math.random()*this.height/this.options.density},this.ctx,this.points.length+1,this.options);this.points.push(s)}for(var o in this.points)this.points[o].circle=new Circle(this.points[o],this.ctx,this.options);this.findClosest(),this.animate(),this.shiftPoints(),!1===this.options.mouse&&this.moveTarget()},Animate.prototype.findClosest=function(){for(var t=0;t<this.points.length;t++){var i=this.points[t];i.closest=[];for(var s=0;s<this.points.length;s++){var o=this.points[s];if(i.id!==o.id){var n,h=!1;for(n=0;n<this.options.lines;n++)h||void 0===i.closest[n]&&(i.closest[n]=o,h=!0);for(n=0;n<this.options.lines;n++)h||i.distanceTo(o)<i.distanceTo(i.closest[n])&&(i.closest[n]=o,h=!0)}}}},Animate.prototype.animate=function(){var t;this.options.updateClosest&&this.findClosest();for(t in this.points)this.points[t].distanceTo(this.target,!0)<5e3?(this.points[t].opacity=.4,this.points[t].circle.opacity=.6):this.points[t].distanceTo(this.target,!0)<1e4?(this.points[t].opacity=.2,this.points[t].circle.opacity=.3):this.points[t].distanceTo(this.target,!0)<3e4?(this.points[t].opacity=.1,this.points[t].circle.opacity=.2):(this.points[t].opacity=.05,this.points[t].circle.opacity=.05);this.ctx.clearRect(0,0,this.width,this.height);for(t in this.points)this.points[t].drawLines(),this.points[t].circle.draw();window.requestAnimationFrame(this.animate.bind(this))},Animate.prototype.shiftPoints=function(){for(var t in this.points)this.points[t].shift()},Animate.prototype.resize=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width,this.canvas.height=this.height},Animate.prototype.mousemove=function(t){t.pageX||t.pageY?(this.target.position.x=t.pageX,this.target.position.y=t.pageY):(t.clientX||t.clientY)&&(this.target.position.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.target.position.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)},Animate.prototype.moveTarget=function(){var t=this;TweenLite.to(this.target.position,2,{x:Math.random()*(this.width-200)+100,y:Math.random()*(this.height-200)+100,ease:Expo.easeInOut,onComplete:function(){t.moveTarget()}})},Point.prototype.distanceTo=function(t,i){i=i||!1;var s=Math.pow(this.position.x-t.position.x,2)+Math.pow(this.position.y-t.position.y,2);return i?Math.abs(s):s},Point.prototype.drawLines=function(){for(var t in this.closest)if(this.opacity>0){this.ctx.beginPath(),this.ctx.moveTo(this.position.x,this.position.y);var i=t+1;this.closest[i]||(i=0),this.ctx.lineCap="round",this.ctx.strokeStyle="rgba("+this.options.lineColor+", "+this.opacity+")",this.ctx.lineWidth=this.options.lineWidth,this.ctx.lineTo(this.closest[t].position.x,this.closest[t].position.y),this.ctx.stroke()}},Point.prototype.shift=function(){var t=this,i=this.options.speed;!0!==this.options.sync&&(i-=this.options.speed*Math.random()),TweenLite.to(this.position,i,{x:this.origin.x-this.options.distance/2+Math.random()*this.options.distance,y:this.origin.y-this.options.distance/2+Math.random()*this.options.distance,ease:Expo.easeInOut,onComplete:function(){t.shift()}})},Circle.prototype.draw=function(){this.opacity>0&&(this.ctx.beginPath(),this.ctx.arc(this.point.position.x,this.point.position.y,this.options.radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba("+this.options.circleColor+", "+this.opacity+")",this.ctx.fill())},new Animate(document.getElementById("canvas"));
}
